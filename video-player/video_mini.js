!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("video_mini",[],t):"object"==typeof exports?exports.video_mini=t():e.video_mini=t()}("undefined"==typeof self?this:self,(()=>(()=>{"use strict";var e={505:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(107);t.default=class{navigator=window.navigator;event;constructor(){this.event=new Event(i.PlayerKey.storeInfo)}get storeKey(){return i.PlayerKey.storeInfo}fadeIn(e){let{el:t,display:s="block",time:i=10,callback:n}=e;t.style.opacity="0",t.style.display=s||"block",function e(){let s=parseFloat(t.style.opacity);(s+=i/1e3)<1.01?(t.style.opacity=s.toString(),requestAnimationFrame(e)):void 0!==n&&n()}()}fadeOut(e){let{el:t,time:s=10,callback:i}=e;t.style.opacity="1",function e(){const n=Number(t.style.opacity)-s/1e3;n<0?(t.style.display="none",void 0!==i&&i()):(t.style.opacity=n.toString(),requestAnimationFrame(e))}()}fadeOutIN(e,t,s,i){const n=t,o=e,l=i?.callback;n&&this.fadeOut({el:n,time:s,callback:()=>{e&&this.fadeIn({el:o,display:i?.display||"block",time:s,callback:l})}})}userAgent=()=>{let e=i.Browser.unknown,t="br-unknown";const s=this.navigator.userAgent;return s.indexOf("Firefox")>-1?(e=i.Browser.moz,t="br-moz"):s.indexOf("Opera")>-1?(e=i.Browser.opera,t="br-opera"):s.indexOf("Trident")>-1?(e=i.Browser.ie,t="br-ie"):s.indexOf("Edge")>-1?(e=i.Browser.edge,t="br-edge"):s.indexOf("Chrome")>-1?(e=i.Browser.google,t="br-chrome"):s.indexOf("Safari")>-1&&(e=i.Browser.safari,t="br-safari"),{browser:e,class:t}};secondsToHms(e){e=Number(e);const t=Math.floor(e/3600),s=Math.floor(e%3600/60),i=Math.floor(e%3600%60),n=e=>e>9?e:"0"+e;return{h:t,m:s,s:i,time:`${n(s)}:${n(i)}`}}eventStoreDispatch(){this.event.detail=localStorage.getItem(i.PlayerKey.storeInfoPrev),window.dispatchEvent(this.event)}eventChangeStor(e){window.addEventListener(i.PlayerKey.storeInfo,(function(t){e(t)}),!1)}eventRemoveStore(e){window.removeEventListener(i.PlayerKey.storeInfo,(function(t){e(t)}),!1)}}},174:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(107),o=i(s(505));t.default=class{container;volumeValue;subtitlesList;icons;subtitlesInit;timeTrackOffset;storeTime;utils;unMountList=[];constructor(e,t){this.container=e,this.volumeValue=t.volumeValue,this.icons=t.icons,this.subtitlesList=t.subtitles||null,this.controls=this.controls.bind(this),this.volume=this.volume.bind(this),this.overlayPlay=this.overlayPlay.bind(this),this.subtitles=this.subtitles.bind(this),this.subtitlesInit=t.subtitlesInit,this.timeTrackOffset=t.timeTrackOffset,this.storeTime=t.timeStore,this.utils=new o.default}unMount=()=>{this.unMountList.forEach((e=>{e()}))};playbackRate(e,t){let{btn:s}=e;const i={},n=document.createElement("div");n.classList.add("player-btn-pp","player-subtitle-container","player-speed-container");const o=document.createElement("div");o.classList.add("subtitle-list","speed-list"),o.style.display="none",[.5,.75,1,1.5,1.75,2].forEach(((e,t)=>{const s=document.createElement("div");s.classList.add("subtitle-item","speed-item",1===e?"active":"skip"),s.dataset.speed=e.toString(),s.innerText=e.toString(),i["speed_list_item_"+t]=s,o.appendChild(s)}));const l=document.createElement("button");return l.classList.add("btn-cc","controls-btn",s),l.innerText=">>",l.addEventListener("click",t.speed_btn,!1),o.addEventListener("click",t.speed_list,!1),n.appendChild(o),n.appendChild(l),{remove:()=>{l.removeEventListener("click",t.subtitle_btn,!1),o.removeEventListener("click",t.subtitle_list,!1),n.remove()},dom_elements:{speed_list:o,speed_container_node:n,speed_btn:l,...i}}}subtitles(e,t){let{btn:s,cItem:i,listTrack:n,track:o}=e;const l=document.createElement("div");l.classList.add("player-btn-pp","player-subtitle-container");const r=document.createElement("div");r.classList.add("subtitle-list",n),r.style.display="none";const a=(()=>{const e=[];if(o){o.forEach((t=>{const s=document.createElement("div");s.classList.add("subtitle-item",i),s.dataset.lang=t.lang,s.innerText=t.label,e.push(s)}));const t=document.createElement("div");t.classList.add("subtitle-item",i,"active"),t.dataset.lang="off",t.innerText="Off",e.push(t)}return e})(),d={};a.forEach((e=>{d["subtitle_list_item_"+e.dataset.lang]=e,r.appendChild(e)}));const c=document.createElement("button");return c.classList.add("btn-cc","controls-btn",s),c.innerText="CC",c.addEventListener("click",t.subtitle_btn,!1),r.addEventListener("click",t.subtitle_list,!1),l.appendChild(r),l.appendChild(c),{remove:()=>{c.removeEventListener("click",t.subtitle_btn,!1),r.removeEventListener("click",t.subtitle_list,!1),l.remove()},dom_elements:{subtitle_list:r,subtitle_container_node:l,subtitle_btn:c,...d}}}volume(e,t){let{btn:s,volume:i,range:n}=e;const o=document.createElement("div");o.classList.add("player-btn-pp","player-volume-container");const l=document.createElement("div");l.classList.add("player-volume-range-wrap",n),l.style.display="none";const r=document.createElement("input");r.type="range",r.classList.add("input-player-range",i),r.value=this.volumeValue.toString(),r.name="volume",r.min="0",r.max="100",r.addEventListener("input",t.volume,!1);const a=document.createElement("div");a.classList.add("player-volume-label"),a.innerText=`${this.volumeValue}%`;const d=document.createElement("button");return d.classList.add("controls-btn",s),d.innerHTML=`<img src="${this.icons}/volume.svg" alt="volume">`,d.addEventListener("click",t.volume_toggle,!1),l.appendChild(r),l.appendChild(a),o.appendChild(l),o.appendChild(d),{remove:()=>{d.removeEventListener("click",t.volume_toggle,!1),r.removeEventListener("input",t.volume,!1),o.remove()},dom_elements:{volume_container_node:o,volume_range_node:l,volume_button:d,volume_range_label:a,volume_range_input:r}}}fullscreen=(e,t,s)=>{const i=document.createElement("div");i.classList.add("player-btn-pp");const n=document.createElement("button");n.innerHTML=`<img src="${this.icons}/fullscreen.svg" alt="fullscreen on">`,n.classList.add("controls-btn",e);const o=document.createElement("button");return o.innerHTML=`<img src="${this.icons}/fullscreen-off.svg" alt="fullscreen off">`,o.classList.add("controls-btn",t),o.style.display="none",o.addEventListener("click",s.fullscreen_off),n.addEventListener("click",s.fullscreen_on),i.append(n,o),{remove:()=>{o.addEventListener("click",s.fullscreen_off),n.addEventListener("click",s.fullscreen_on),i.remove()},dom_elements:{fullscreen_container_node:i,fullscreen_on:n,fullscreen_off:o}}};play(e,t,s){const i=document.createElement("button");i.classList.add("controls-btn",e);const n=document.createElement("img");n.src=`${this.icons}/play.svg`,n.alt="play",n.style.display="none";const o=document.createElement("button");o.classList.add("controls-btn",t);const l=document.createElement("img");l.src=`${this.icons}/pause.svg`,l.alt="pause";const r=document.createElement("div");return o.classList.add("player-btn-pp"),o.appendChild(l),i.appendChild(n),i.addEventListener("click",s.button_play),o.addEventListener("click",s.button_pause),r.appendChild(i),r.appendChild(o),{remove:()=>{i.removeEventListener("click",s.button_play,!1),o.removeEventListener("click",s.button_pause,!1),r.remove()},dom_elements:{buttons_pp_action:r,button_pause:o,button_play:i}}}track(e,t,s,i,n,o){const l=document.createElement("div");l.classList.add("player-track-container");const r=document.createElement("div");r.classList.add("player-track-time");const a=document.createElement("span");a.classList.add(i),a.innerText="00.00";const d=document.createElement("span");d.classList.add("player-track-time_sp"),d.innerText="/";const c=document.createElement("span");c.classList.add(n),c.innerText="00.00",r.appendChild(a),r.appendChild(d),r.appendChild(c),l.appendChild(r);const u=document.createElement("div");u.classList.add("player-track",e),u.addEventListener("click",o.track,!1),l.appendChild(u);const m=document.createElement("div");m.classList.add("player-buffered");const h=document.createElement("span");h.classList.add("player-buffered-amount",s),m.appendChild(h),l.appendChild(m);const v=document.createElement("div");v.classList.add("player-progress");const p=document.createElement("span");return p.classList.add("player-progress-amount",t),v.appendChild(p),l.appendChild(v),{remove:()=>{u.removeEventListener("click",o.track,!1),l.remove()},dom_elements:{track_container_node:l,track:r,track_time:a,track_time_full:c,track_buffered_amount:h,track_buffered:m,track_player:u,track_progress:v,track_progress_amount:p}}}doubleTap(e){const t=document.createElement("div");t.classList.add("double-tap-container",n.UiClasses.doubleTap,n.UiClasses.doubleTapLeft),t.dataset.tap="left",t.innerHTML=`\n\t\t\t<div class="double-tap-icon-wrap">\n\t\t\t\t<img src="${this.icons}/fast-forward.svg" class="rot-180" alt="tap-left"> \n\t\t\t\t<div>${this.timeTrackOffset||""}</div>\n\t  \t\t</div>\n\t\t`;const s=document.createElement("div");return s.classList.add("double-tap-container",n.UiClasses.doubleTap,n.UiClasses.doubleTapRight),s.dataset.tap="right",s.innerHTML=`\n\t\t\t<div class="double-tap-icon-wrap">\n\t\t\t\t<div>${this.timeTrackOffset||""}</div>\n\t\t\t\t<img src="${this.icons}/fast-forward.svg" alt="tap-right">  \n\t  \t\t</div>\n\t\t`,t?.addEventListener("touchstart",e.tap_handler,!1),s?.addEventListener("touchstart",e.tap_handler,!1),this.container?.append(s,t),{remove:()=>{t?.removeEventListener("touchstart",e.tap_handler,!1),s?.removeEventListener("touchstart",e.tap_handler,!1),t.remove(),s.remove()},dom_elements:{double_tab_right_node:s,double_tab_left_node:t}}}overlayPlay(e){const t=document.createElement("div");t.classList.add("overlay-play",n.UiClasses.videoContainerOverlay);const s=document.createElement("div");return s.classList.add("play-icon",n.UiClasses.videoOverlayBtn),s.addEventListener("click",e.overlay_btn_play),t.appendChild(s),this.container?.appendChild(t),{remove:()=>{s.removeEventListener("click",e.overlay_btn_play,!1),t.remove()},dom_elements:{overlay_btn_play:s,overlay_node:t}}}storeTimeBtn(e){const t=document.createElement("div");t.classList.add(n.UiClasses.playToTimeContainer),t.style.display=this.storeTime?"block":"none",t.addEventListener("click",e.store_time_btn);const s=document.createElement("div");return s.classList.add("play-icon",n.UiClasses.playToTime),s.innerText=`start ${this.utils.secondsToHms(this.storeTime).time}`,t.appendChild(s),this.container?.appendChild(t),{remove:()=>{t.removeEventListener("click",e.store_time_btn),t.remove()},dom_elements:{store_time_node:t,store_time_btn:s}}}controls(e,t){const s=this.play(n.UiClasses.play,n.UiClasses.pause,t),i=document.createElement("div");i.classList.add("video-player-controls","videoPlayerControls"),i.style.display="none";const o=document.createElement("div");o.classList.add("player-btn-left"),o.appendChild(s.dom_elements.buttons_pp_action);const l=this.track(n.UiClasses.track,n.UiClasses.progress,n.UiClasses.buffer,n.UiClasses.trackTime,n.UiClasses.trackTimeFull,t),r=document.createElement("div");r.classList.add("player-btn-right"),i.appendChild(o),i.appendChild(l.dom_elements.track_container_node);let a={},d=null;!0===this.subtitlesInit&&(d=this.subtitles({btn:n.UiClasses.subtitleBtn,cItem:n.UiClasses.subtitleItem,listTrack:n.UiClasses.subtitleList,track:this.subtitlesList},t),a={...d.dom_elements},r.appendChild(a.subtitle_container_node));let c={};const u=this.playbackRate({btn:n.UiClasses.subtitleBtn},t);c={...u.dom_elements},r.appendChild(c.speed_container_node);const m=this.fullscreen(n.UiClasses.fullscreen,n.UiClasses.fullscreenCancel,t);r.appendChild(m.dom_elements.fullscreen_container_node);const h=this.volume({btn:n.UiClasses.volume,volume:n.UiClasses.rangeVolume,range:n.UiClasses.volumeProgressContainer},t);return r.appendChild(h.dom_elements.volume_container_node),i.appendChild(r),e?.appendChild(i),{remove:()=>{s.remove(),l.remove(),h.remove(),m.remove(),i.remove(),u.remove(),!0===this.subtitlesInit&&null!==d&&d.remove()},dom_elements:{controls:i,...s.dom_elements,...l.dom_elements,...a,...m.dom_elements,...h.dom_elements,...c}}}createUI=e=>{const t={controls:this.controls(this.container,e),overlay:this.overlayPlay(e),doubleTap:this.doubleTap(e),timeStore:this.storeTimeBtn(e)};return Object.keys(t).forEach((e=>{const s=t[e].remove;this.unMountList.push(s)})),t}}},77:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(107),o=i(s(505)),l=i(s(174));t.default=class{video;videoContainer;controlsUI;isPlay=!1;isFullScreen=!1;isVolume=!1;navigator=window.navigator;volumeValue;iconsFolder;subtitles;isSubtitles=!1;isSpeed=!1;isTrack=!1;ui;timeTrackOffset;isMouseHover=!1;destroyObject={};tapedTwice=!1;browser={browser:"",class:""};name;timeStore=0;timeStoreOffset;mX=0;mY=0;utils;dom_elements={};activeLang="off";activeSpeed=1;constructor(e){let{videoContainer:t,iconsFolder:s,volumeValue:i,subtitle:r,timeTrackOffset:a,videoPlayerUI:d,storeTimeOffset:c}=e;if(this.videoContainer=document.querySelector(t),this.video=this.videoContainer?.querySelector("video")||null,this.volumeValue=i||n.IVideoPlayerDefaultConst.volume,this.iconsFolder=s,this.timeTrackOffset=a||n.IVideoPlayerDefaultConst.timeTrackOffset,this.subtitles=this.video?.querySelectorAll("track")||null,this.name=this.video?.dataset.name||this.videoContainer?.dataset.name,this.timeStoreOffset=c||4,this.utils=new o.default,!this.checkError()&&this.videoContainer){const e=this.videoContainer;this.timeStore=this.getStoreTime().time,this.video?.classList.add(n.UiClasses.video);const t={volumeValue:this.volumeValue,icons:this.iconsFolder,subtitles:this.subtitles,subtitlesInit:r,timeTrackOffset:this.timeTrackOffset,timeStore:this.timeStore};if(this._events=this._events.bind(this),this.ui=d?d(e,t):new l.default(e,t),this.browser=this.utils.userAgent(),e.classList.add(this.browser.class),this.dom_elements=this.ui.createUI({...this._events()}),this.video&&this.video.textTracks&&this.subtitles&&this.subtitles.length>0){for(let e=0;e<this.video.textTracks.length;e++)this.video.textTracks[e].mode="hidden";this.activeLang=this.subtitles[this.subtitles?.length-1].dataset.lang||"off"}}this._onChangePip=this._onChangePip.bind(this),this._onChangeFullScreen=this._onChangeFullScreen.bind(this),this._onChangeProgressVideo=this._onChangeProgressVideo.bind(this),this._onEventKeywords=this._onEventKeywords.bind(this),this._onMouse=this._onMouse.bind(this)}get videoElement(){return this.video}get controls_elements(){return this.dom_elements.controls.dom_elements}get controls(){return this.dom_elements.controls.dom_elements.controls}get isVideoPlay(){return this.isPlay}get btnPause(){return this.dom_elements.controls.dom_elements.button_pause}get btnPlay(){return this.dom_elements.controls.dom_elements.button_play}get overlay(){return this.dom_elements.overlay.dom_elements}removeStoreTime=()=>{localStorage.removeItem(n.PlayerKey.storeInfo),localStorage.removeItem(n.PlayerKey.storeInfoPrev),this.timeStore=0};getStoreTime=()=>{const e=localStorage.getItem(n.PlayerKey.storeInfo);if(e){const t=JSON.parse(e);if(this.name===t.name)return t}return{name:this.name||"",time:0}};checkError=()=>this.video?this.videoContainer?this.iconsFolder?!this.name&&(console.error("not found data-name to container",this.name),!0):(console.error("not found url to icon field",this.iconsFolder),!0):(console.error("video container selector not found",this.videoContainer),!0):(console.error("video selector not found",this.video),!0);_events(){return{overlay_btn_play:()=>{this.utils.eventStoreDispatch(),this.video?.play(),this.setStoreTime(this.video?.currentTime||0)},button_play:()=>{this.play()},button_pause:()=>{this.pause()},store_time_btn:()=>{this.playTo(this.timeStore)},volume:e=>{if(e instanceof Event){const t=this.controls_elements.volume_range_label,s=e.target,i=this.video;t.textContent=s.value+"%",i&&(i.volume=parseInt(s.value)/100)}},volume_toggle:()=>{this.isVolume=!this.isVolume;const e=this.controls_elements.volume_range_node;this.isVolume?e&&this.utils.fadeIn({el:e,display:"flex",time:n.FadeTime.volume}):e&&this.utils.fadeOut({el:e,time:n.FadeTime.volume})},fullscreen_off:()=>{this.video&&this.videoContainer&&(this.isFullScreen=!1,document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.utils.fadeOutIN(this.controls_elements.fullscreen_on,this.controls_elements.fullscreen_off,n.FadeTime.fullscreen))},fullscreen_on:()=>{if(this.video&&this.videoContainer){this.isFullScreen=!0;const e=this.videoContainer;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.utils.fadeOutIN(this.controls_elements.fullscreen_off,this.controls_elements.fullscreen_on,n.FadeTime.fullscreen,this.controlsUI)}},track:e=>{if(e instanceof MouseEvent){const t=this.controls_elements.track_player,s=e.offsetX;this.video&&(this.isPlay||this.utils.fadeOutIN(this.btnPause,this.btnPlay,n.FadeTime.controls),this.isTrack=!0,this.video.pause(),this.video.currentTime=this.video.duration*s/t.offsetWidth,this.setStoreTime(this.video.currentTime),this.video.play())}},subtitle_btn:()=>{const e=this.controls_elements.subtitle_list;this.isSubtitles=!this.isSubtitles,this.isSubtitles?this.utils.fadeIn({el:e,time:n.FadeTime.subtitle}):this.utils.fadeOut({el:e,time:n.FadeTime.subtitle})},subtitle_list:e=>{if(e instanceof MouseEvent){const t=e.target,s=t.dataset.lang||"off";if(this.activeLang!=s&&this.video&&this.subtitles){this.controls_elements.subtitle_list.querySelector(`div[data-lang='${this.activeLang}']`)?.classList.remove("active"),t.classList.add("active");const e=Object.values(this.video.textTracks).findIndex((e=>e.language===this.activeLang));if("off"===s)this.video.textTracks[e].mode="disabled";else{const t=Object.values(this.video.textTracks).findIndex((e=>e.language===s));-1!==e&&(this.video.textTracks[e].mode="disabled"),this.video.textTracks[t].mode="showing"}this.activeLang=s,this.isSubtitles=!1,this.utils.fadeOut({el:this.controls_elements.subtitle_list,time:n.FadeTime.subtitle})}}},tap_handler:e=>{if(e instanceof TouchEvent){const t=e.target,s=t.dataset.tap;if(s){if(!this.tapedTwice)return this.tapedTwice=!0,setTimeout((()=>{this.tapedTwice=!1}),300),!1;e.preventDefault(),t.classList.add("tap-active"),setTimeout((()=>{t.classList.remove("tap-active")}),500),this.video&&this.isPlay&&"right"===s&&(this.video.currentTime+=this.timeTrackOffset),this.video&&this.isPlay&&"left"===s&&(this.video.currentTime-=this.timeTrackOffset)}}},speed_btn:()=>{const e=this.controls_elements.speed_list;this.isSpeed=!this.isSpeed,this.isSpeed?this.utils.fadeIn({el:e,time:n.FadeTime.subtitle}):this.utils.fadeOut({el:e,time:n.FadeTime.subtitle})},speed_list:e=>{if(e instanceof MouseEvent){const t=e.target,s=t.dataset.speed||"1";this.activeSpeed!=Number(s)&&this.video&&(this.controls_elements.speed_list.querySelector(`div[data-speed='${this.activeSpeed}']`)?.classList.remove("active"),t.classList.add("active"),this.activeSpeed=Number(s),this.isSpeed=!1,this.video.playbackRate=this.activeSpeed,this.utils.fadeOut({el:this.controls_elements.speed_list,time:n.FadeTime.subtitle}))}}}}play=()=>{this.isPlay=!0,this.utils.fadeOutIN(this.btnPause,this.btnPlay,n.FadeTime.controls),this.video?.play(),this.setStoreTime(this.video?.currentTime||0)};playTo=e=>{this.video&&(this.isPlay=!0,this.video.currentTime=e,this.utils.fadeOutIN(this.btnPause,this.btnPlay,n.FadeTime.controls),this.utils.fadeOut({el:this.dom_elements.timeStore.dom_elements.store_time_node,time:n.FadeTime.controls}),this.video.play(),e!==this.timeStore&&this.setStoreTime(e))};pause=()=>{this.isPlay=!1,this.video?.pause(),this.setStoreTime(this.video?.currentTime||0)};stop=()=>{this.isPlay=!1,this.video&&(this.video.pause(),this.video.currentTime=0,this.removeStoreTime())};playerInit=e=>{!this.checkError()&&this.video&&(this.destroyObject.overlay=this.dom_elements.overlay.remove,this.destroyObject._onChangeProgressVideo=this._onChangeProgressVideo(),this.destroyObject._onChangePip=this._onChangePip(),this.destroyObject._onChangeFullScreen=this._onChangeFullScreen(),this.destroyObject._onEventKeywords=this._onEventKeywords(),this.destroyObject._onMouse=this._onMouse(),this.video.volume=this.volumeValue/100,e&&e())};onDestroy=e=>{for(const e in this.destroyObject)this.destroyObject[e]();this.dom_elements.controls.remove(),this.dom_elements.doubleTap.remove(),e&&e()};_onMouse(){const e=e=>{this.isVideoPlay&&(this.mX=e.clientX,this.mY=e.clientY)},t=()=>{this.isMouseHover=!1},s=()=>{this.isMouseHover=!0};return this.videoContainer&&(this.videoContainer.addEventListener("mousemove",e),this.videoContainer.addEventListener("mouseleave",t),this.videoContainer.addEventListener("mouseenter",s)),()=>{this.videoContainer?.removeEventListener("mousemove",e),this.videoContainer?.removeEventListener("mouseleave",t),this.videoContainer?.removeEventListener("mouseenter",s)}}_onChangeFullScreen(){const e=()=>{this.isFullScreen?(this.isFullScreen=!1,this.utils.fadeOutIN(this.controls_elements.fullscreen_off,this.controls_elements.fullscreen_on,n.FadeTime.fullscreen)):(this.isFullScreen=!0,this.utils.fadeOutIN(this.controls_elements.fullscreen_on,this.controls_elements.fullscreen_off,n.FadeTime.fullscreen))};return this.video&&this.videoContainer&&(this.browser.browser===n.Browser.moz?this.videoContainer.addEventListener("mozfullscreenchange",e):(this.videoContainer.addEventListener("webkitfullscreenchange",e),this.videoContainer.addEventListener("fullscreenchange",e))),()=>{this.browser.browser===n.Browser.moz?this.videoContainer?.removeEventListener("mozfullscreenchange",e):(this.videoContainer?.removeEventListener("webkitfullscreenchange",e),this.videoContainer?.removeEventListener("fullscreenchange",e))}}_onChangePip(){const e=this.video,t=()=>{},s=()=>{};return document.pictureInPictureEnabled&&(e.addEventListener("enterpictureinpicture",t,!1),e.addEventListener("leavepictureinpicture",s,!1),this.navigator&&(this.navigator.mediaSession.setActionHandler("pause",(()=>{e.pause(),this.utils.fadeOutIN(this.btnPlay,this.btnPause,n.FadeTime.controls)})),this.navigator.mediaSession.setActionHandler("play",(()=>{e.play(),this.utils.fadeOutIN(this.btnPause,this.btnPlay,n.FadeTime.controls)})))),()=>{e.removeEventListener("enterpictureinpicture",t,!1),e.removeEventListener("leavepictureinpicture",s,!1)}}_onEventKeywords(){const e=e=>{if(this.video&&this.isMouseHover)switch(e.which){case 32:this.isPlay?(this.isPlay=!1,this.video.pause()):(this.isPlay=!0,this.utils.eventStoreDispatch(),this.video.play()),this.setStoreTime(this.video?.currentTime||0);break;case 37:this.isPlay&&(this.video.currentTime-=this.timeTrackOffset);break;case 39:this.isPlay&&(this.video.currentTime+=this.timeTrackOffset);break;default:return 0}};return this.video&&document.addEventListener("keyup",e),()=>{document.removeEventListener("keyup",e),this.isMouseHover=!1}}_onChangeProgressVideo(){const e=this.video,t=()=>{this.isPlay=!1,e.pause(),e.currentTime=0,this.removeStoreTime(),this.utils.fadeOutIN(this.overlay.overlay_node,this.controls,40,{callback:()=>{this.utils.fadeOutIN(this.btnPlay,this.btnPause,0)},display:"flex"})},s=()=>{this.isPlay=!0,this.utils.fadeOutIN(this.btnPause,this.btnPlay,n.FadeTime.controls,this.controlsUI),this.utils.fadeOut({el:this.dom_elements.timeStore.dom_elements.store_time_node,time:n.FadeTime.controls}),this.isTrack||this.utils.fadeOutIN(this.controls,this.overlay.overlay_node,40,{display:"flex"}),this.isTrack=!1},i=()=>{const t=e.duration;if(t>0){const s=this.dom_elements.controls.dom_elements.track_progress_amount,i=this.dom_elements.controls.dom_elements.track_time;s&&(s.style.width=e.currentTime/t*100+"%"),i&&(i.textContent=this.utils.secondsToHms(e.currentTime).time),e.currentTime>this.timeStore+this.timeStoreOffset&&this.setStoreTime(e.currentTime)}},o=()=>{const t=e.duration;if(t>0)for(let s=0;s<e.buffered.length;s++)if(e.buffered.start(e.buffered.length-1-s)<e.currentTime){const i=this.dom_elements.controls.dom_elements.track_buffered_amount;i&&(i.style.width=e.buffered.end(e.buffered.length-1-s)/t*100+"%");break}},l=()=>{const t=this.dom_elements.controls.dom_elements.track_time_full;t&&(t.innerText=this.utils.secondsToHms(e.duration).time)},r=()=>{this.isTrack||this.utils.fadeOutIN(this.overlay.overlay_node,this.controls,40,{callback:()=>{this.utils.fadeOutIN(this.btnPlay,this.btnPause,0,this.controlsUI)},display:"flex"})};return this.video&&(e.addEventListener("progress",o,!1),e.addEventListener("timeupdate",i,!1),e.addEventListener("ended",t,!1),e.addEventListener("play",s,!1),e.addEventListener("pause",r,!1),e.addEventListener("loadedmetadata",l,!1)),()=>{e.removeEventListener("ended",t,!1),e.removeEventListener("progress",o,!1),e.removeEventListener("timeupdate",i,!1),e.removeEventListener("play",s,!1),e.removeEventListener("pause",r,!1),e.addEventListener("loadedmetadata",l,!1)}}setStoreTime=e=>{this.timeStore=e,localStorage.setItem(n.PlayerKey.storeInfoPrev,localStorage.getItem(n.PlayerKey.storeInfo)||"not found"),localStorage.setItem(n.PlayerKey.storeInfo,JSON.stringify({name:this.name,time:e}))}}},107:(e,t)=>{var s,i,n,o,l;Object.defineProperty(t,"__esModule",{value:!0}),t.FadeTime=t.UiClasses=t.PlayerKey=t.Browser=t.IVideoPlayerDefaultConst=void 0,function(e){e[e.volume=100]="volume",e[e.timeTrackOffset=3]="timeTrackOffset"}(s||(t.IVideoPlayerDefaultConst=s={})),function(e){e.moz="Mozilla Firefox",e.opera="Opera",e.ie="Microsoft Internet Explorer",e.edge="Microsoft Edge",e.google="Google Chrome or Chromium",e.safari="Apple Safari",e.unknown="unknown"}(i||(t.Browser=i={})),function(e){e.storeInfo="player-info",e.dataset="name",e.storeInfoPrev="player-info-prev"}(n||(t.PlayerKey=n={})),function(e){e.play="videoPlay",e.stop="videoStop",e.pause="videoPause",e.start="videoStart",e.fullscreen="videoFullscreen",e.fullscreenCancel="videoFullscreenCancel",e.buffer="playerBufferedAmount",e.progress="playerProgressAmount",e.track="playerTrack",e.volume="videoVolume",e.rangeVolume="videoVolumeRange",e.labelValue="player-volume-label",e.volumeProgressContainer="playerVolumeContainer",e.videoPlayerControls="videoPlayerControls",e.videoContainerOverlay="overlayVideoContainer",e.videoOverlayBtn="overlayVideoBtn",e.trackTime="palyertrackTime",e.trackTimeFull="palyertrackTimeFull",e.subtitleBtn="playerSubtitleBtn",e.subtitleItem="playerSubtitleItem",e.subtitleList="palyersubtitleList",e.video="playerVideo",e.doubleTap="doubleTap",e.doubleTapLeft="doubleTapLeft",e.doubleTapRight="doubleTapRight",e.playToTime="playToTimeBtn",e.playToTimeContainer="playToTimeContainer"}(o||(t.UiClasses=o={})),function(e){e[e.fullscreen=30]="fullscreen",e[e.controls=25]="controls",e[e.volume=20]="volume",e[e.subtitle=60]="subtitle"}(l||(t.FadeTime=l={}))},752:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UiClasses=t.VideoPlayerUI=t.VideoPlayer=t.VideoUtils=void 0;const n=i(s(505));t.VideoUtils=n.default;const o=i(s(77));t.VideoPlayer=o.default;const l=i(s(174));t.VideoPlayerUI=l.default;const r=s(107);Object.defineProperty(t,"UiClasses",{enumerable:!0,get:function(){return r.UiClasses}}),s(9),t.default={VideoUtils:n.default,VideoPlayer:o.default,VideoPlayerUI:l.default}},9:(e,t,s)=>{s.r(t)}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,s),o.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=s(752);return i.default})()));